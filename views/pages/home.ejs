<div class="content page">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Attendance Overview</h4>
                        <p class="category">Absences <%- absencesLeft %></p>
                    </div>
                    <div class="content">
                        <div id="attendance_overview_bar" class="ct-chart"></div>
                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="fa fa-area-chart"></i> Exact values
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Sign In</h4>
                    </div>
                    <div class="content">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label>Code</label>
                                    <input type="text" class="form-control" placeholder="Code" id="code">
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="signin()" class="btn btn-info btn-fill pull-right">Welcome Sign In</button>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Attendance Details</h4>
                        <p class="category">Attendance status per each event so far</p>
                    </div>
                    <div class="content table-responsive">
                        <table class="table table-hover table-striped">
                            <thead>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Date</th>
                            </thead>
                            <tbody>
                                <% for (var i = 0; i < attendances.length; i++) { %>
                                  <% var attendance = attendances[i]; %>
                                  <tr>
                                      <td><%- attendance.title %></td>
                                      <% if (attendance.type == 'Attended') { %>
                                        <td class="text-success">
                                      <% } else if (attendance.type == 'Absent') { %>
                                        <td class="text-danger">
                                      <% } else if (attendance.type == 'Expected Absent') { %>
                                        <td class="text-warning">
                                      <% } %>
                                      <%- attendance.type %>
                                      </td>
                                      <td>
                                        <%- attendance.date %>
                                        <% if (attendance.type == 'Expected Absent') { %>
                                          <form action="/expectedAbsences/<%- attendance._key %>" method="post">
                                            <button style="margin-left: 10px" type="submit">
                                              <i class="fa fa-trash"></i>
                                            </button>
                                          </form>
                                        <% } %>
                                      </td>
                                  </tr>
                                <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Payment History</h4>
                        <p class="category">All payments made and recieved and the status on each</p>
                    </div>
                    <div class="content table-responsive">
                        <table class="table table-hover table-striped">
                            <thead>
                                <th>Type</th>
                                <th>Completed?</th>
                                <th>Amount ($)</th>
                                <th>Message</th>
                                <th>Date</th>
                                <th>Complete</th>
                            </thead>
                            <tbody>
                                <% for (var i = 0; i < requests.length; i++) { %>
                                  <% var request = requests[i]; %>
                                  <tr>
                                      <td><%- request.type %></td>
                                      <% if (request.completed === true) { %>
                                        <td class="text-success">Yes
                                      <% } else { %>
                                        <td class="text-danger">No
                                      <% } %>
                                      </td>
                                      <td><%- request.dollars %></td>
                                      <td><%- request.message %></td>
                                      <td><%- timeToString(request.lastUpdated) %></td>
                                      <td>
                                        <% if (request.completed !== true && request.type == "charge") { %>
                                          <form action="/paymentRequests/<%- request._key %>" method="post">
                                            <button style="margin-left: 10px" type="submit">
                                              <i class="fa fa-check"></i>
                                            </button>
                                          </form>
                                        <% } else if (request.complete === true) { %>
                                          No action required.
                                        <% } else { %>
                                          Waiting for leadership approval...
                                        <% } %>
                                      </td>
                                  </tr>
                                <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
